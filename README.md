# AmneziaVPN Config Decoder & Encoder (Rust Rewrite)

This project is a **Rust rewrite** of the original Python script for converting AmneziaVPN configurations between Base64-encoded strings and JSON format.

**Please note:** The core logic of the Rust code in this repository was entirely generated by an AI coding assistant based on the original Python implementation.

## Original Project and Creator

This Rust program is based on the original Python project by **andr13**:

*   **Original Project Repository:** [https://github.com/andr13/amnezia-config-decoder](https://github.com/andr13/amnezia-config-decoder)
*   **Original Creator:** [https://github.com/andr13](https://github.com/andr13)

We are grateful to andr13 for the original work which served as the foundation for this Rust version.

## Requirements

To build and run this Rust program, you need:

*   Rust and Cargo installed. You can install them by following the instructions on [https://rustup.rs/](https://rustup.rs/).

## Building

To build the project, navigate to the project directory in your terminal and run:

```bash
cargo build
```

This will compile the project and create an executable in the `target/debug/` directory (or `target/release/` if you build with `cargo build --release`).

## Usage

The compiled executable supports encoding and decoding configurations. The executable is located at `./target/debug/amnezia-config-decoder` (replace `debug` with `release` if you built in release mode).

**Decoding from a Command-Line String:**

Provide the `vpn://` string directly as a positional argument.

```bash
./target/debug/amnezia-config-decoder vpn://AAAGX.. [-o output.json]
```

*   `vpn://AAAGX..`: The Base64-encoded string containing the AmneziaVPN configuration.
*   `-o output.json`: (Optional) Path to the JSON file where the decoded configuration will be saved. If not specified, the configuration will be printed to the console.

**Decoding from a File:**

Use the `-d` or `--decode-file` flag to specify a file containing the `vpn://` string.

```bash
./target/debug/amnezia-config-decoder -d encoded.vpn [-o output.json]
```

*   `-d encoded.vpn`: Path to the file containing the Base64 string with the "vpn://" prefix.
*   `-o output.json`: (Optional) Path to the JSON file where the decoded configuration will be saved. If not specified, the configuration will be printed to the console.

**Encoding from a JSON File:**

Use the `-i` or `--input` flag to specify a JSON file to encode.

```bash
./target/debug/amnezia-config-decoder -i input.json
```

*   `-i input.json`: Path to the JSON file containing the configuration to encode. The encoded `vpn://` string will be printed to the console.

## Examples

**Decode a Base64 string from the command line to the console:**

```bash
./target/debug/amnezia-config-decoder vpn://AAAGX..
```

**Decode a Base64 string from a file and save to another file:**

```bash
./target/debug/amnezia-config-decoder -d amnezia_config.vpn -o config.json
```

**Encode a JSON configuration from a file (assuming `my_config.json` exists):**

```bash
./target/debug/amnezia-config-decoder -i my_config.json
```

## Background

AmneziaVPN uses a custom string encoding scheme to represent configurations. This Rust program replicates the encoding and decoding logic, allowing you to work with configs in a much more readable JSON format.

## Contributing

Contributions are welcome! Please open an issue or pull request if you have any suggestions or bug reports.

## License

This project is licensed under the GPL-3.0 license, inherited from the original Python project.
